{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\softeam2\\\\Desktop\\\\Fantore\\\\client\\\\src\\\\components\\\\Universes\\\\MainUniverse.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport PageTitle from '../PageTitle/PageTitle';\nimport UniversesNav from '../UniversesNav/UniversesNav';\nimport Articles from '../Articles/Articles';\nimport './Universes.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst MainUniverse = props => {\n  _s();\n\n  // Adaptation du src pour les images \n  let imgPath = \"\";\n\n  switch (imgPath) {\n    case \"/produits\":\n      imgPath = \"\";\n      break;\n\n    case \"/univers/harry-potter\":\n      imgPath = \"../../\";\n      break;\n\n    case \"/univers/star-wars\":\n      imgPath = \"../../\";\n      break;\n\n    case \"/univers/marvel\":\n      imgPath = \"../../\";\n      break;\n\n    case \"/univers/seigneur-des-anneaux\":\n      imgPath = \"../../\";\n      break;\n\n    default:\n      imgPath = \"\";\n  }\n\n  const [apiPath, setApiPath] = useState(\"produits\");\n  const [articles, setArticles] = useState([]); // const catFiltreInitialState = {\"status\" : \"inactif\"}; \n\n  const [catFiltre, setCatFiltre] = useState([]);\n  const [checkFilter, setCheckFilter] = useState(false);\n  const [mainTitle, setMainTitle] = useState(\"Nos collections\");\n  const [themeStyle, setThemeStyle] = useState(\"mainTheme \"); // indiquer hp / .... pour les className \n\n  const fetchArticles = async path => {\n    const response = await fetch(`http://localhost:8088/${path}`, {\n      method: \"GET\",\n      mode: \"cors\"\n    });\n    const parseResponse = await response.json();\n    console.log(parseResponse);\n    return parseResponse;\n  };\n\n  const setThemeOnClick = (event, path, title, className) => {\n    event.preventDefault();\n    setApiPath(path);\n    setMainTitle(title);\n    setThemeStyle(className);\n  }; // const reset = () => { \n  //     setArticles(parseResponse);\n  // }\n\n\n  const setCategoryOnClick = (event, condition) => {\n    // reset des filtres\n    setCatFiltre([]); // on reset le check au state initial \n\n    setCheckFilter(false);\n    event.preventDefault();\n\n    if (condition !== 0) {\n      let articlesByCat = articles.filter(article => article.fk_category === condition);\n      setCatFiltre(articlesByCat);\n      console.log(articlesByCat);\n\n      if (articlesByCat.length === 0) {\n        setCheckFilter(true);\n      }\n    } else {\n      setCatFiltre(articles);\n      console.log(articles);\n    }\n  };\n\n  useEffect(() => {\n    fetchArticles(apiPath).then(result => {\n      console.log(result);\n      setArticles(result);\n      setCheckFilter(false);\n      setCatFiltre([]);\n    });\n  }, [apiPath]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"universes\",\n      children: [/*#__PURE__*/_jsxDEV(PageTitle, {\n        mainTitle: mainTitle,\n        themeStyle: themeStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(UniversesNav, {\n        setThemeOnClick: setThemeOnClick,\n        themeStyle: themeStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Articles, {\n        articles: articles,\n        catFiltre: catFiltre,\n        checkFilter: checkFilter,\n        imgPath: imgPath,\n        themeStyle: themeStyle,\n        setCategoryOnClick: setCategoryOnClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(MainUniverse, \"kCkQDN59189j9a3W4z3vMj7+cus=\");\n\n_c = MainUniverse;\nexport default MainUniverse;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainUniverse\");","map":{"version":3,"sources":["C:/Users/softeam2/Desktop/Fantore/client/src/components/Universes/MainUniverse.js"],"names":["useState","useEffect","Link","PageTitle","UniversesNav","Articles","MainUniverse","props","imgPath","apiPath","setApiPath","articles","setArticles","catFiltre","setCatFiltre","checkFilter","setCheckFilter","mainTitle","setMainTitle","themeStyle","setThemeStyle","fetchArticles","path","response","fetch","method","mode","parseResponse","json","console","log","setThemeOnClick","event","title","className","preventDefault","setCategoryOnClick","condition","articlesByCat","filter","article","fk_category","length","then","result"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PageTitle from '../PageTitle/PageTitle';\r\nimport UniversesNav from '../UniversesNav/UniversesNav';\r\nimport Articles from '../Articles/Articles';\r\n\r\nimport './Universes.css';\r\n\r\nconst MainUniverse = (props) => {\r\n\r\n    // Adaptation du src pour les images \r\n    let imgPath = \"\";\r\n    switch (imgPath) {\r\n        case \"/produits\":\r\n        imgPath = \"\"\r\n            break;\r\n        case \"/univers/harry-potter\":\r\n        imgPath = \"../../\"\r\n            break;\r\n        case \"/univers/star-wars\":\r\n        imgPath = \"../../\"\r\n            break;\r\n        case \"/univers/marvel\":\r\n        imgPath = \"../../\"\r\n            break;\r\n        case \"/univers/seigneur-des-anneaux\":\r\n        imgPath = \"../../\"\r\n            break;\r\n        default:\r\n            imgPath = \"\";\r\n    }\r\n\r\n    const [apiPath, setApiPath] = useState(\"produits\");\r\n\r\n    const [articles, setArticles] = useState([]);\r\n\r\n    // const catFiltreInitialState = {\"status\" : \"inactif\"}; \r\n    const [catFiltre, setCatFiltre ] = useState([]);\r\n    const [checkFilter, setCheckFilter ] = useState(false);\r\n    \r\n    const [mainTitle, setMainTitle] = useState(\"Nos collections\");\r\n\r\n    const [themeStyle, setThemeStyle ] = useState(\"mainTheme \");\r\n    // indiquer hp / .... pour les className \r\n\r\n    const fetchArticles = async (path) => {\r\n\r\n        const response = await fetch(`http://localhost:8088/${path}`, {\r\n            method: \"GET\",\r\n            mode: \"cors\",\r\n        });\r\n        const parseResponse = await response.json();\r\n        console.log(parseResponse);\r\n        return parseResponse;\r\n    };\r\n\r\n    const setThemeOnClick = (event, path, title, className) => {\r\n        event.preventDefault();\r\n        setApiPath(path);\r\n        setMainTitle(title);\r\n        setThemeStyle(className);\r\n    }\r\n\r\n    // const reset = () => { \r\n    //     setArticles(parseResponse);\r\n    // }\r\n\r\n    const setCategoryOnClick = (event, condition) => {\r\n        // reset des filtres\r\n        setCatFiltre([]);\r\n        // on reset le check au state initial \r\n        setCheckFilter(false);\r\n        event.preventDefault();\r\n        if (condition !== 0) {\r\n            let articlesByCat = articles.filter(article => article.fk_category === condition);\r\n            setCatFiltre(articlesByCat);\r\n            console.log(articlesByCat);\r\n            if(articlesByCat.length === 0) {\r\n                setCheckFilter(true);\r\n            }\r\n        }\r\n        else {\r\n            setCatFiltre(articles);\r\n            console.log(articles);\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        fetchArticles(apiPath)\r\n        .then((result) => {\r\n            console.log(result);\r\n            setArticles(result);\r\n            setCheckFilter(false);\r\n            setCatFiltre([]);\r\n        });\r\n    }, [apiPath]);\r\n\r\n    \r\n    return (\r\n        <>\r\n            <div className=\"universes\">\r\n                < PageTitle mainTitle={mainTitle} themeStyle={themeStyle}/>\r\n                < UniversesNav \r\n                setThemeOnClick={setThemeOnClick}\r\n                themeStyle={themeStyle}\r\n                \r\n                />\r\n                < Articles articles={articles} catFiltre={catFiltre} checkFilter={checkFilter} imgPath={imgPath} themeStyle={themeStyle} setCategoryOnClick={setCategoryOnClick}/>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default MainUniverse;"]},"metadata":{},"sourceType":"module"}